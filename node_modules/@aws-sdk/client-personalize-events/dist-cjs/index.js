'use strict';

var middlewareHostHeader = require('@aws-sdk/middleware-host-header');
var middlewareLogger = require('@aws-sdk/middleware-logger');
var middlewareRecursionDetection = require('@aws-sdk/middleware-recursion-detection');
var middlewareUserAgent = require('@aws-sdk/middleware-user-agent');
var configResolver = require('@smithy/config-resolver');
var core = require('@smithy/core');
var schema = require('@smithy/core/schema');
var middlewareContentLength = require('@smithy/middleware-content-length');
var middlewareEndpoint = require('@smithy/middleware-endpoint');
var middlewareRetry = require('@smithy/middleware-retry');
var smithyClient = require('@smithy/smithy-client');
var httpAuthSchemeProvider = require('./auth/httpAuthSchemeProvider');
var runtimeConfig = require('./runtimeConfig');
var regionConfigResolver = require('@aws-sdk/region-config-resolver');
var protocolHttp = require('@smithy/protocol-http');

const resolveClientEndpointParameters = (options) => {
    return Object.assign(options, {
        useDualstackEndpoint: options.useDualstackEndpoint ?? false,
        useFipsEndpoint: options.useFipsEndpoint ?? false,
        defaultSigningName: "personalize",
    });
};
const commonParams = {
    UseFIPS: { type: "builtInParams", name: "useFipsEndpoint" },
    Endpoint: { type: "builtInParams", name: "endpoint" },
    Region: { type: "builtInParams", name: "region" },
    UseDualStack: { type: "builtInParams", name: "useDualstackEndpoint" },
};

const getHttpAuthExtensionConfiguration = (runtimeConfig) => {
    const _httpAuthSchemes = runtimeConfig.httpAuthSchemes;
    let _httpAuthSchemeProvider = runtimeConfig.httpAuthSchemeProvider;
    let _credentials = runtimeConfig.credentials;
    return {
        setHttpAuthScheme(httpAuthScheme) {
            const index = _httpAuthSchemes.findIndex((scheme) => scheme.schemeId === httpAuthScheme.schemeId);
            if (index === -1) {
                _httpAuthSchemes.push(httpAuthScheme);
            }
            else {
                _httpAuthSchemes.splice(index, 1, httpAuthScheme);
            }
        },
        httpAuthSchemes() {
            return _httpAuthSchemes;
        },
        setHttpAuthSchemeProvider(httpAuthSchemeProvider) {
            _httpAuthSchemeProvider = httpAuthSchemeProvider;
        },
        httpAuthSchemeProvider() {
            return _httpAuthSchemeProvider;
        },
        setCredentials(credentials) {
            _credentials = credentials;
        },
        credentials() {
            return _credentials;
        },
    };
};
const resolveHttpAuthRuntimeConfig = (config) => {
    return {
        httpAuthSchemes: config.httpAuthSchemes(),
        httpAuthSchemeProvider: config.httpAuthSchemeProvider(),
        credentials: config.credentials(),
    };
};

const resolveRuntimeExtensions = (runtimeConfig, extensions) => {
    const extensionConfiguration = Object.assign(regionConfigResolver.getAwsRegionExtensionConfiguration(runtimeConfig), smithyClient.getDefaultExtensionConfiguration(runtimeConfig), protocolHttp.getHttpHandlerExtensionConfiguration(runtimeConfig), getHttpAuthExtensionConfiguration(runtimeConfig));
    extensions.forEach((extension) => extension.configure(extensionConfiguration));
    return Object.assign(runtimeConfig, regionConfigResolver.resolveAwsRegionExtensionConfiguration(extensionConfiguration), smithyClient.resolveDefaultRuntimeConfig(extensionConfiguration), protocolHttp.resolveHttpHandlerRuntimeConfig(extensionConfiguration), resolveHttpAuthRuntimeConfig(extensionConfiguration));
};

class PersonalizeEventsClient extends smithyClient.Client {
    config;
    constructor(...[configuration]) {
        const _config_0 = runtimeConfig.getRuntimeConfig(configuration || {});
        super(_config_0);
        this.initConfig = _config_0;
        const _config_1 = resolveClientEndpointParameters(_config_0);
        const _config_2 = middlewareUserAgent.resolveUserAgentConfig(_config_1);
        const _config_3 = middlewareRetry.resolveRetryConfig(_config_2);
        const _config_4 = configResolver.resolveRegionConfig(_config_3);
        const _config_5 = middlewareHostHeader.resolveHostHeaderConfig(_config_4);
        const _config_6 = middlewareEndpoint.resolveEndpointConfig(_config_5);
        const _config_7 = httpAuthSchemeProvider.resolveHttpAuthSchemeConfig(_config_6);
        const _config_8 = resolveRuntimeExtensions(_config_7, configuration?.extensions || []);
        this.config = _config_8;
        this.middlewareStack.use(schema.getSchemaSerdePlugin(this.config));
        this.middlewareStack.use(middlewareUserAgent.getUserAgentPlugin(this.config));
        this.middlewareStack.use(middlewareRetry.getRetryPlugin(this.config));
        this.middlewareStack.use(middlewareContentLength.getContentLengthPlugin(this.config));
        this.middlewareStack.use(middlewareHostHeader.getHostHeaderPlugin(this.config));
        this.middlewareStack.use(middlewareLogger.getLoggerPlugin(this.config));
        this.middlewareStack.use(middlewareRecursionDetection.getRecursionDetectionPlugin(this.config));
        this.middlewareStack.use(core.getHttpAuthSchemeEndpointRuleSetPlugin(this.config, {
            httpAuthSchemeParametersProvider: httpAuthSchemeProvider.defaultPersonalizeEventsHttpAuthSchemeParametersProvider,
            identityProviderConfigProvider: async (config) => new core.DefaultIdentityProviderConfig({
                "aws.auth#sigv4": config.credentials,
            }),
        }));
        this.middlewareStack.use(core.getHttpSigningPlugin(this.config));
    }
    destroy() {
        super.destroy();
    }
}

class PersonalizeEventsServiceException extends smithyClient.ServiceException {
    constructor(options) {
        super(options);
        Object.setPrototypeOf(this, PersonalizeEventsServiceException.prototype);
    }
}

class InvalidInputException extends PersonalizeEventsServiceException {
    name = "InvalidInputException";
    $fault = "client";
    constructor(opts) {
        super({
            name: "InvalidInputException",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, InvalidInputException.prototype);
    }
}
class ResourceInUseException extends PersonalizeEventsServiceException {
    name = "ResourceInUseException";
    $fault = "client";
    constructor(opts) {
        super({
            name: "ResourceInUseException",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, ResourceInUseException.prototype);
    }
}
class ResourceNotFoundException extends PersonalizeEventsServiceException {
    name = "ResourceNotFoundException";
    $fault = "client";
    constructor(opts) {
        super({
            name: "ResourceNotFoundException",
            $fault: "client",
            ...opts,
        });
        Object.setPrototypeOf(this, ResourceNotFoundException.prototype);
    }
}

const _A = "Action";
const _AI = "ActionId";
const _AIL = "ActionInteractionsList";
const _AIc = "ActionInteraction";
const _AIct = "ActionImpression";
const _AL = "ActionList";
const _E = "Event";
const _EL = "EventList";
const _I = "Item";
const _II = "ItemId";
const _IIE = "InvalidInputException";
const _IL = "ItemList";
const _Im = "Impression";
const _MA = "MetricAttribution";
const _PA = "PutActions";
const _PAI = "PutActionInteractions";
const _PAIR = "PutActionInteractionsRequest";
const _PAR = "PutActionsRequest";
const _PE = "PutEvents";
const _PER = "PutEventsRequest";
const _PI = "PutItems";
const _PIR = "PutItemsRequest";
const _PU = "PutUsers";
const _PUR = "PutUsersRequest";
const _RIUE = "ResourceInUseException";
const _RNFE = "ResourceNotFoundException";
const _SJAIP = "SynthesizedJsonActionInteractionProperties";
const _SJAP = "SynthesizedJsonActionProperties";
const _SJEPJSON = "SynthesizedJsonEventPropertiesJSON";
const _SJIP = "SynthesizedJsonItemProperties";
const _SJUP = "SynthesizedJsonUserProperties";
const _U = "User";
const _UI = "UserId";
const _UL = "UserList";
const _a = "application/json";
const _aI = "actionId";
const _aIc = "actionInteractions";
const _ac = "actions";
const _c = "client";
const _dA = "datasetArn";
const _e = "error";
const _eAS = "eventAttributionSource";
const _eI = "eventId";
const _eL = "eventList";
const _eT = "eventType";
const _eV = "eventValue";
const _h = "http";
const _hE = "httpError";
const _i = "impression";
const _iI = "itemId";
const _it = "items";
const _m = "message";
const _mA = "metricAttribution";
const _mT = "mediaType";
const _p = "properties";
const _rI = "recommendationId";
const _s = "sensitive";
const _sA = "sentAt";
const _sI = "sessionId";
const _sm = "smithy.ts.sdk.synthetic.com.amazonaws.personalizeevents";
const _t = "timestamp";
const _tI = "trackingId";
const _u = "users";
const _uI = "userId";
const n0 = "com.amazonaws.personalizeevents";
var ActionId = [0, n0, _AI, 8, 0];
var ItemId = [0, n0, _II, 8, 0];
var SynthesizedJsonActionInteractionProperties = [0, n0, _SJAIP, { [_mT]: _a, [_s]: 1 }, 0];
var SynthesizedJsonActionProperties = [0, n0, _SJAP, { [_mT]: _a, [_s]: 1 }, 0];
var SynthesizedJsonEventPropertiesJSON = [0, n0, _SJEPJSON, { [_mT]: _a, [_s]: 1 }, 0];
var SynthesizedJsonItemProperties = [0, n0, _SJIP, { [_mT]: _a, [_s]: 1 }, 0];
var SynthesizedJsonUserProperties = [0, n0, _SJUP, { [_mT]: _a, [_s]: 1 }, 0];
var UserId = [0, n0, _UI, 8, 0];
var Action$ = [3, n0, _A,
    0,
    [_aI, _p],
    [0, [() => SynthesizedJsonActionProperties, 0]], 1
];
var ActionInteraction$ = [3, n0, _AIc,
    0,
    [_aI, _sI, _t, _eT, _uI, _eI, _rI, _i, _p],
    [[() => ActionId, 0], 0, 4, 0, [() => UserId, 0], 0, 0, [() => ActionImpression, 0], [() => SynthesizedJsonActionInteractionProperties, 0]], 4
];
var Event$ = [3, n0, _E,
    8,
    [_eT, _sA, _eI, _eV, _iI, _p, _rI, _i, _mA],
    [0, 4, 0, 1, [() => ItemId, 0], [() => SynthesizedJsonEventPropertiesJSON, 0], 0, [() => Impression, 0], () => MetricAttribution$], 2
];
var InvalidInputException$ = [-3, n0, _IIE,
    { [_e]: _c, [_hE]: 400 },
    [_m],
    [0]
];
schema.TypeRegistry.for(n0).registerError(InvalidInputException$, InvalidInputException);
var Item$ = [3, n0, _I,
    0,
    [_iI, _p],
    [0, [() => SynthesizedJsonItemProperties, 0]], 1
];
var MetricAttribution$ = [3, n0, _MA,
    0,
    [_eAS],
    [0], 1
];
var PutActionInteractionsRequest$ = [3, n0, _PAIR,
    0,
    [_tI, _aIc],
    [0, [() => ActionInteractionsList, 0]], 2
];
var PutActionsRequest$ = [3, n0, _PAR,
    0,
    [_dA, _ac],
    [0, [() => ActionList, 0]], 2
];
var PutEventsRequest$ = [3, n0, _PER,
    0,
    [_tI, _sI, _eL, _uI],
    [0, 0, [() => EventList, 0], [() => UserId, 0]], 3
];
var PutItemsRequest$ = [3, n0, _PIR,
    0,
    [_dA, _it],
    [0, [() => ItemList, 0]], 2
];
var PutUsersRequest$ = [3, n0, _PUR,
    0,
    [_dA, _u],
    [0, [() => UserList, 0]], 2
];
var ResourceInUseException$ = [-3, n0, _RIUE,
    { [_e]: _c, [_hE]: 409 },
    [_m],
    [0]
];
schema.TypeRegistry.for(n0).registerError(ResourceInUseException$, ResourceInUseException);
var ResourceNotFoundException$ = [-3, n0, _RNFE,
    { [_e]: _c, [_hE]: 404 },
    [_m],
    [0]
];
schema.TypeRegistry.for(n0).registerError(ResourceNotFoundException$, ResourceNotFoundException);
var User$ = [3, n0, _U,
    0,
    [_uI, _p],
    [0, [() => SynthesizedJsonUserProperties, 0]], 1
];
var __Unit = "unit";
var PersonalizeEventsServiceException$ = [-3, _sm, "PersonalizeEventsServiceException", 0, [], []];
schema.TypeRegistry.for(_sm).registerError(PersonalizeEventsServiceException$, PersonalizeEventsServiceException);
var ActionImpression = [1, n0, _AIct,
    0, [() => ActionId,
        0]
];
var ActionInteractionsList = [1, n0, _AIL,
    0, [() => ActionInteraction$,
        0]
];
var ActionList = [1, n0, _AL,
    0, [() => Action$,
        0]
];
var EventList = [1, n0, _EL,
    0, [() => Event$,
        0]
];
var Impression = [1, n0, _Im,
    0, [() => ItemId,
        0]
];
var ItemList = [1, n0, _IL,
    0, [() => Item$,
        0]
];
var UserList = [1, n0, _UL,
    0, [() => User$,
        0]
];
var PutActionInteractions$ = [9, n0, _PAI,
    { [_h]: ["POST", "/action-interactions", 200] }, () => PutActionInteractionsRequest$, () => __Unit
];
var PutActions$ = [9, n0, _PA,
    { [_h]: ["POST", "/actions", 200] }, () => PutActionsRequest$, () => __Unit
];
var PutEvents$ = [9, n0, _PE,
    { [_h]: ["POST", "/events", 200] }, () => PutEventsRequest$, () => __Unit
];
var PutItems$ = [9, n0, _PI,
    { [_h]: ["POST", "/items", 200] }, () => PutItemsRequest$, () => __Unit
];
var PutUsers$ = [9, n0, _PU,
    { [_h]: ["POST", "/users", 200] }, () => PutUsersRequest$, () => __Unit
];

class PutActionInteractionsCommand extends smithyClient.Command
    .classBuilder()
    .ep(commonParams)
    .m(function (Command, cs, config, o) {
    return [middlewareEndpoint.getEndpointPlugin(config, Command.getEndpointParameterInstructions())];
})
    .s("AmazonPersonalizeEvents", "PutActionInteractions", {})
    .n("PersonalizeEventsClient", "PutActionInteractionsCommand")
    .sc(PutActionInteractions$)
    .build() {
}

class PutActionsCommand extends smithyClient.Command
    .classBuilder()
    .ep(commonParams)
    .m(function (Command, cs, config, o) {
    return [middlewareEndpoint.getEndpointPlugin(config, Command.getEndpointParameterInstructions())];
})
    .s("AmazonPersonalizeEvents", "PutActions", {})
    .n("PersonalizeEventsClient", "PutActionsCommand")
    .sc(PutActions$)
    .build() {
}

class PutEventsCommand extends smithyClient.Command
    .classBuilder()
    .ep(commonParams)
    .m(function (Command, cs, config, o) {
    return [middlewareEndpoint.getEndpointPlugin(config, Command.getEndpointParameterInstructions())];
})
    .s("AmazonPersonalizeEvents", "PutEvents", {})
    .n("PersonalizeEventsClient", "PutEventsCommand")
    .sc(PutEvents$)
    .build() {
}

class PutItemsCommand extends smithyClient.Command
    .classBuilder()
    .ep(commonParams)
    .m(function (Command, cs, config, o) {
    return [middlewareEndpoint.getEndpointPlugin(config, Command.getEndpointParameterInstructions())];
})
    .s("AmazonPersonalizeEvents", "PutItems", {})
    .n("PersonalizeEventsClient", "PutItemsCommand")
    .sc(PutItems$)
    .build() {
}

class PutUsersCommand extends smithyClient.Command
    .classBuilder()
    .ep(commonParams)
    .m(function (Command, cs, config, o) {
    return [middlewareEndpoint.getEndpointPlugin(config, Command.getEndpointParameterInstructions())];
})
    .s("AmazonPersonalizeEvents", "PutUsers", {})
    .n("PersonalizeEventsClient", "PutUsersCommand")
    .sc(PutUsers$)
    .build() {
}

const commands = {
    PutActionInteractionsCommand,
    PutActionsCommand,
    PutEventsCommand,
    PutItemsCommand,
    PutUsersCommand,
};
class PersonalizeEvents extends PersonalizeEventsClient {
}
smithyClient.createAggregatedClient(commands, PersonalizeEvents);

Object.defineProperty(exports, "$Command", {
    enumerable: true,
    get: function () { return smithyClient.Command; }
});
Object.defineProperty(exports, "__Client", {
    enumerable: true,
    get: function () { return smithyClient.Client; }
});
exports.Action$ = Action$;
exports.ActionInteraction$ = ActionInteraction$;
exports.Event$ = Event$;
exports.InvalidInputException = InvalidInputException;
exports.InvalidInputException$ = InvalidInputException$;
exports.Item$ = Item$;
exports.MetricAttribution$ = MetricAttribution$;
exports.PersonalizeEvents = PersonalizeEvents;
exports.PersonalizeEventsClient = PersonalizeEventsClient;
exports.PersonalizeEventsServiceException = PersonalizeEventsServiceException;
exports.PersonalizeEventsServiceException$ = PersonalizeEventsServiceException$;
exports.PutActionInteractions$ = PutActionInteractions$;
exports.PutActionInteractionsCommand = PutActionInteractionsCommand;
exports.PutActionInteractionsRequest$ = PutActionInteractionsRequest$;
exports.PutActions$ = PutActions$;
exports.PutActionsCommand = PutActionsCommand;
exports.PutActionsRequest$ = PutActionsRequest$;
exports.PutEvents$ = PutEvents$;
exports.PutEventsCommand = PutEventsCommand;
exports.PutEventsRequest$ = PutEventsRequest$;
exports.PutItems$ = PutItems$;
exports.PutItemsCommand = PutItemsCommand;
exports.PutItemsRequest$ = PutItemsRequest$;
exports.PutUsers$ = PutUsers$;
exports.PutUsersCommand = PutUsersCommand;
exports.PutUsersRequest$ = PutUsersRequest$;
exports.ResourceInUseException = ResourceInUseException;
exports.ResourceInUseException$ = ResourceInUseException$;
exports.ResourceNotFoundException = ResourceNotFoundException;
exports.ResourceNotFoundException$ = ResourceNotFoundException$;
exports.User$ = User$;
